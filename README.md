# Udacity Blockchain Capstone

The capstone will build upon the knowledge you have gained in the course in order to build a decentralized housing product. 

# How to run

1. Install Ganache from https://www.trufflesuite.com/ganache and truffle using `npm i -g truffle` or use `npx truffle ...`

2. Create a new Ethereum workspace

3. Run `npm install` in root directory

4. CD into eth-contracts with `cd eth-contracts`

5. Run `truffle migrate --reset`

6. Run `truffle test` // Everything should pass

# Live

- SolnSquareVerifier - 0x626fa9770E61fa38083e74107bc3945A73E0feB1 on rinkeby
- 10 tokens were minted using different proofs generated by ZoKrates
- OpenSea marketplace available at https://testnets.opensea.io/assets/unidentified-contract-c4ymfpxinc?search[resultModel]=ASSETS
- 5 properties have been put up for sale and sold to 0xBECd4fB6A5AD28793B1c96F7A2b1a784Ed045138

# To Deploy
Following the OpenSea creatures documentation, run the following commands:

```
export ALCHEMY_KEY="<your_alchemy_project_id>"
export MNEMONIC="<metamask>"
export NETWORK="rinkeby"
truffle deploy --network rinkeby
```

# To Mint
Run
```
export OWNER_ADDRESS="<my_address>"
export NFT_CONTRACT_ADDRESS="<deployed_contract_address>"
```

To mint tokens you'll need to generate a new proof for every token. Open one terminal inside the root directory(1) and one inside /zokrates/code/square(2)

If you do not have zokrates installed follow the getting started guide [here](https://zokrates.github.io/gettingstarted.html). The following assumes a local installation without docker. If this is the first time you're running zokrates, run `export PATH=$PATH:/home/<your_username>/.zokrates/bin` and replace <your_username> with your username

(2)
```
zokrates setup
zokrates compute-witness -a 2 4
zokrates generate-proof
```

Now open app.js and replace the second argument to verifyThenMint on line ~42 with the tokenId starting from 0 and incrementing by 1 for every token.

(1)
```
node app
```

Next rerun (2) with 3 9, then 4 16 or any other n n**2 combination. Then run `node app` again and so on until you reach 10 tokens

# Project Resources

* [Remix - Solidity IDE](https://remix.ethereum.org/)
* [Visual Studio Code](https://code.visualstudio.com/)
* [Truffle Framework](https://truffleframework.com/)
* [Ganache - One Click Blockchain](https://truffleframework.com/ganache)
* [Open Zeppelin ](https://openzeppelin.org/)
* [Interactive zero knowledge 3-colorability demonstration](http://web.mit.edu/~ezyang/Public/graph/svg.html)
* [Docker](https://docs.docker.com/install/)
* [ZoKrates](https://github.com/Zokrates/ZoKrates)
